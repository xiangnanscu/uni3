<script setup>
import { Model } from "@/lib/model";
import { useGet } from "@/composables/useGet";

const { query } = useRoute();
const ready = ref();
const actionUrl = `/<%= tableName %>/create`;
const successRoute = { name: "<%= modelName %>List", query };
const modelJson = await useGet(`/<%= tableName %>/json`);
const model = await Model.create_model_async(modelJson);
ready.value = true;
</script>
<template>
  <model-edit-form
    v-if="ready"
    :model="model"
    :action-url="actionUrl"
    :successRoute="successRoute"
  ></model-edit-form>
</template>